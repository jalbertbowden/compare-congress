<!DOCTYPE html>
<html>
  <head>
    <title>Committees - Compare Congress</title>
    <link rel="stylesheet" href="compare-congress.css" />
    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <!-- <script src="compare-congress.jquery.js"></script> -->
  </head>
  <body>
    <h1>Committees - Compare Congress</h1>
    <ul>
    </ul>
  </body>


<script>
$(document).ready(function () {
var apiURLStub1 = 'https://congress.api.sunlightfoundation.com/';
var apiURLStubAPIKey = '&apikey=ebbe9f8409134303aab01479e8f1a42f';

var apiURLStubAmendments = "amendments?";
var apiURLStubBills = "bills?";
var apiURLStubBillsSearch = "bills/search?";
var apiURLStubCommittees = 'committees?';
var apiURLStubDistrictsLocate = "districts/locate?";
var apiURLStubFloorUpdates = "floor_updates?";
var apiURLStubHearingsDCFalse = "hearings?dc=false?";
var apiURLStubHearingsDCTrue = "hearings?dc=true?";
var apiURLStubHearingsDCNull = "hearings?dc=null?";
var apiURLStubLegislators = "legislators?";
var apiURLStubLegislatorsLocate = "legislators/locate?";
var apiURLStubNominations = "nominations?";
var apiURLStubUpcomingBills = "upcoming_bills?";
var apiURLStubVotes = "votes?";
var apiURLStubAllPerPage = "per_page=all";

var initialAPICall = apiURLStub1 + apiURLStubLegislators + apiURLStubAllPerPage + apiURLStubAPIKey;

var apiCallCommittees = apiURLStub1 + apiURLStubLegislators + apiURLStubCommittees + apiURLStubAPIKey;

    $.getJSON(apiCallCommittees, function (data) {
      console.log(apiCallCommittees);
// chamber, committee_id, name, parent_committee_id, subcommittee
        var jsonData = data.results;
        $.each(jsonData, function(){
           $("ul").append("<li>Name: "+this['name']+"</li><li>Chamber: "+this['chamber']+"</li><li>Committee ID: "+this['committee_id']+"</li><li>Parent Committee ID: "+this['parent_committee_id']+"</li><li>Subcommittee: "+this['subcommittee']+"</li>");
     });
    });

// show user what they have selected


var personSelectEvent = function() {
  var str = "";
  $(this).find('option:selected').each(function(i,v){
    str += $(this).text() + " ";
  });
  $('#'+$(this).attr('id').replace('person', 'selected')).text( str );
}
$('.person-selector').change(personSelectEvent);



function displayVal1() {
  var selectedVal1 = $("#person1").val();
  $("#selected-val-1").html( "<b>Selected Option 1 val=\"\":</b> " + selectedVal1 );
  var apiURLStubMemberID1 = 'member_ids=' + selectedVal1;
  var apiURLCommittee1 = apiURLStub1 + apiURLStubCommittees + apiURLStubMemberID1 + apiURLStubAPIKey;
 // console.log(apiURLCommittee1);

    $.getJSON(apiURLCommittee1, function (data) {

    });




}



// don't need this at some point
$("#person1").change(displayVal1);
displayVal1();



function displayVal2() {
  var selectedVal2 = $("#person2").val();
  $("#selected-val-2").html( "<b>Selected Option 2 val=\"\":</b> " + selectedVal2 );
  var apiURLStubMemberID2 = 'member_ids=' + selectedVal2;
  var apiURLCommittee2 = apiURLStub1 + apiURLStubCommittees + apiURLStubMemberID2 + apiURLStubAPIKey;
  //console.log(apiURLCommittee2);
}

// don't need this at some point
$("#person2").change(displayVal2);
displayVal2();

});
</script>
</html>
